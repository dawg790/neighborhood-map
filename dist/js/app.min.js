
var places=[{"content":"Ski area","lat":39.480742,"long":-106.066891,"title":"Breckenridge Ski Resort","animation":null,"marker":null,"infowindow":null},{"content":"Ski area resort and lodge","lat":39.484333,"long":-106.049904,"title":"Mountain Thunder Lodge","animation":null,"marker":null,"infowindow":null},{"content":"Snowmobile adventures","lat":39.508813,"long":-105.945805,"title":"Good Times Adventure","animation":null,"marker":null,"infowindow":null},{"content":"Local brews and burgers","lat":39.476205,"long":-106.043884,"title":"Breckenridge Brewery and Pub","animation":null,"marker":null,"infowindow":null}];var allSettings=[{"type":"Satellite"},{"type":"Terrain"},{"type":"Road"}];var Model=function(data){};var ViewModel=function(){var self=this;self.map=null;self.selectPlace=function(clickedItem){for(var i=0;i<self.fsPlaces().length;i++){self.fsPlaces()[i].marker.setAnimation(null)};clickedItem.marker.setAnimation(google.maps.Animation.BOUNCE);self.map.setCenter(new google.maps.LatLng(clickedItem.location.lat,clickedItem.location.lng));};self.settings=function(data){if(data.type==="Satellite"){self.map.setMapTypeId(google.maps.MapTypeId.SATELLITE);}else if(data.type==="Terrain"){self.map.setMapTypeId(google.maps.MapTypeId.TERRAIN);}else if(data.type==="Road"){self.map.setMapTypeId(google.maps.MapTypeId.ROADMAP);}};self.fsPlaces=ko.observableArray([]);self.initializeMap=function(){var city="Breckenridge,CO";$.getJSON("https://api.foursquare.com/v2/venues/search?client_id=MUKBUW43YPMWUS2HKDZQZW4VYLT5B1HHST20VR5K35WAKFVC&client_secret=5I1RMLBOLDC1QXU5IJN4VLC2E1N2G1JIGB3QUG5FTAZO4CFM&v=20130815&near="+city,function(data){self.fsPlaces(data.response.venues);setMarkers();});function setMarkers(){for(var i=0;i<self.fsPlaces().length;i++){self.fsPlaces()[i].marker=new google.maps.Marker({position:new google.maps.LatLng(self.fsPlaces()[i].location.lat,self.fsPlaces()[i].location.lng),title:self.fsPlaces()[i].name,map:self.map,animation:google.maps.Animation.DROP,});}}
var styles=[{"featureType":"water","elementType":"geometry","stylers":[{"visibility":"on"},{"color":"#1080dd"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ffff5f"}]},{"featureType":"road.highway.controlled_access","elementType":"geometry.fill","stylers":[{"color":"#f09609"}]},{"featureType":"road.arterial","elementType":"geometry.stroke","stylers":[{"color":"#515151"}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#ffff5f"}]}];var mapOptions={center:{lat:39.481,lng:-106.041},zoom:13,mapTypeId:google.maps.MapTypeId.TERRAIN,streetViewControl:false,zoomControl:false,panControl:false,mapTypeControl:false};self.map=new google.maps.Map(document.getElementById('map-canvas'),mapOptions);var bikeLayer=new google.maps.BicyclingLayer();bikeLayer.setMap(self.map);self.map.setOptions({styles:styles});};if(typeof google==='object'){google.maps.event.addDomListener(window,'load',this.initializeMap);}else{var errorStr="Resource Google API did not load. Try again later.";document.body.innerHTML=errorStr;}};ko.applyBindings(new ViewModel());